defmodule Miner do
  use Application

  def start(_type, _args) do
    print_ascii_header()
    Elixium.Store.Ledger.initialize()

    # TODO: Make genesis block mined rather than hard-coded
    if !Elixium.Store.Ledger.empty?() do
      Elixium.Store.Ledger.hydrate()
    end

    Elixium.Store.Utxo.initialize()
    Elixium.Pool.Orphan.initialize()
    Miner.Supervisor.start_link()
  end

  def print_ascii_header do
    IO.puts "\e[34m
    ░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░
    ░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░
    ░░░░░███████████░░░█████░░░░░░░░░░░█████░░░█████░░░░░█████░░░█████░░░█████░░░░░░░░█████░░░█████░░░░░░░░░█████░░░░░
    ░░░░░███████████░░░█████░░░░░░░░░░░█████░░░█████░░░░░█████░░░█████░░░█████░░░░░░░░█████░░░███████░░░░░███████░░░░░
    ░░░░░█████░░░░░░░░░█████░░░░░░░░░░░█████░░░░░█████░█████░░░░░█████░░░█████░░░░░░░░█████░░░████████░░░████████░░░░░
    ░░░░░█████░░░░░░░░░█████░░░░░░░░░░░█████░░░░░█████░█████░░░░░█████░░░█████░░░░░░░░█████░░░█████░███░███░█████░░░░░
    ░░░░░███████░░░░░░░█████░░░░░░░░░░░█████░░░░░░░███████░░░░░░░█████░░░█████░░░░░░░░█████░░░█████░░█████░░█████░░░░░
    ░░░░░█████░░░░░░░░░█████░░░░░░░░░░░█████░░░░░█████░█████░░░░░█████░░░█████░░░░░░░░█████░░░█████░░░███░░░█████░░░░░
    ░░░░░█████░░░░░░░░░█████░░░░░░░░░░░█████░░░░░█████░█████░░░░░█████░░░█████░░░░░░░░█████░░░█████░░░░░░░░░█████░░░░░
    ░░░░░███████████░░░█████████████░░░█████░░░█████░░░░░█████░░░█████░░░██████████████████░░░█████░░░░░░░░░█████░░░░░
    ░░░░░███████████░░░█████████████░░░█████░░░█████░░░░░█████░░░█████░░░░░░░░████████░░░░░░░░█████░░░░░░░░░█████░░░░░
    ░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░
    ░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░
    \e[32m
    Elixium Core Version #{Application.spec(:elixium_core, :vsn)}       Miner version #{Application.spec(:elixium_miner, :vsn)}
    \e[0m
    \n\n
██████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████
    "

  end

end
